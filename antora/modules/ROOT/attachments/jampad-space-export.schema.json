{
  "$schema": "http://json-schema.org/draft-06/schema#",
  "$id": "https://jampad.app/schemas/jampad-space-export.schema.json",
  "title": "Jam Pad Space Export",
  "description": "The format in which Jam Pad exports a single space",
  "$ref": "#/definitions/Space",
  "definitions": {
    "Space": {
      "type": "object",
      "required": [],
      "additionalProperties": false,
      "title": "Space",
      "description": "All contents of a single Jam Pad space that are not user/device-specific",
      "properties": {
        "customFieldsForFiles": {
          "type": "array",
          "description": "All custom fields usable for recordings",
          "items": {
            "$ref": "#/definitions/CustomField"
          }
        },
        "customFieldsForMarkers": {
          "type": "array",
          "description": "All custom fields usable for markers",
          "items": {
            "$ref": "#/definitions/CustomField"
          }
        },
        "customItemTypes": {
          "description": "All types of custom items usable for custom fields",
          "type": "array",
          "items": {
            "$ref": "#/definitions/CustomItemType"
          }
        },
        "customItems": {
          "description": "All custom items usable for custom fields. Each map key must be the ID of a custom item type. Each value must be the list of custom items.",
          "type": "object",
          "additionalProperties": {
            "type": "array",
            "items": {
              "$ref": "#/definitions/CustomItem"
            }
          }
        },
        "files": {
          "description": "All recordings",
          "type": "array",
          "items": {
            "$ref": "#/definitions/MediaFile"
          }
        },
        "markers": {
          "description": "All markers",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Marker"
          }
        },
        "playlists": {
          "description": "All playlists",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Playlist"
          }
        },
        "sheets": {
          "description": "All sheets",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Sheet"
          }
        }
      }
    },
    "CustomField": {
      "type": "object",
      "required": ["id", "name", "type"],
      "title": "Custom field",
      "description": "A custom field usable for recordings or markers, depending in which list it appears",
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "description": "Identifier of the custom field. Must be unique within this space."
        },
        "hidden": {
          "type": "boolean",
          "description": "Whether this field is hidden",
          "default": false
        },
        "position": {
          "type": "integer",
          "description": "Position of this field relative to other fields. Influences where it appears in the Jam Pad user interface.",
          "default": 1000
        },
        "showInListView": {
          "type": "boolean",
          "description": "Whether this field should show up in Jam Pad's list views (vs. only in the detail views).",
          "default": false
        },
        "name": {
          "type": "string",
          "description": "Field name"
        },
        "description": {
          "type": "string",
          "description": "Explains the purpose of this field"
        },
        "type": {
          "enum": ["string", "note", "tonalQuality", "bpm", "timeSignature", "item", "items"],
          "description": "Defines which type of values this field accepts and how Jam Pad displays them"
        },
        "itemTypeId": {
          "type": "string",
          "description": "For type 'item' and 'items', this defines the collection of choices among which users may pick"
        }
      }
    },
    "CustomItemType": {
      "type": "object",
      "required": ["id", "name"],
      "title": "Custom item type",
      "description": "Defines a possible collection of items. The actual items for the collection are not yet defined.",
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "description": "Identifier of the custom item type. Must be unique within this space."
        },
        "hidden": {
          "type": "boolean",
          "description": "Whether this item collection is hidden",
          "default": false
        },
        "name": {
          "type": "string",
          "description": "Item collection name"
        }
      }
    },
    "CustomItem": {
      "type": "object",
      "required": ["id", "name"],
      "title": "Custom item",
      "description": "Defines an actual custom item belonging to the surrounding collection.",
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "description": "Identifier of the custom item. Must be unique within this collection."
        },
        "hidden": {
          "type": "boolean",
          "description": "Whether this item is hidden",
          "default": false
        },
        "name": {
          "type": "string",
          "description": "Item name"
        },
        "customColor": {
          "description": "Defines a custom color in which this item will be appear.",
          "$ref": "#/definitions/CustomColor"
        },
        "paletteColor": {
          "description": "Picks a color from a dynamic palette. Only applied if no custom color is given.",
          "type": "integer"
        }
      }
    },
    "CustomColor": {
      "title": "Custom color",
      "description": "Defines a custom RGB color",
      "type": "array",
      "items": [
        { "type": "integer", "minimum": 0, "maximum": 255, "description": "Amount of red" },
        { "type": "integer", "minimum": 0, "maximum": 255, "description": "Amount of green"  },
        { "type": "integer", "minimum": 0, "maximum": 255, "description": "Amount of blue"  }
      ],
      "minItems": 3,
      "maxItems": 3
    },
    "MediaFile": {
      "title": "Recording",
      "description": "Describes a recording",
      "type": "object",
      "required": ["path"],
      "additionalProperties": false,
      "properties": {
        "path": {
          "type": "string",
          "description": "Path to the actual media file. This path must be relative to the directory in which the JSON file is located."
        },
        "authorId": {
          "type": "integer",
          "description": "TODO"
        },
        "hidden": {
          "type": "boolean",
          "description": "Whether this recording is hidden",
          "default": false
        },
        "name": {
          "type": "string",
          "description": "Name of the recording",
          "default": "Metadata title or file name of the actually imported file"
        },
        "recordedAt": {
          "type": "integer",
          "$ref": "#/definitions/Timestamp",
          "description": "Certain timestamp that says when this recording was initially recorded"
        },
        "origin": {
          "enum": ["imported", "recorded"],
          "description": "Whether this recording was recorded directly within Jam Pad or imported from outside",
          "default": "imported"
        },
        "importInstallationId": {
          "type": "string",
          "format": "uuid",
          "description": "If imported, this field contains a globally unique identifier that says in which specific Jam Pad installation this recording has been originally imported.",
          "default": "ID of the Jam Pad installation which is importing this JSON file"
        },
        "importId": {
          "type": "string",
          "format": "uuid",
          "description": "If imported, this field contains a globally unique identifier that says by which specific original import job this recording has been imported.",
          "default": "ID of the import with which this JSON file is being imported"
        },
        "importBaseFolderHash": {
          "type": "string",
          "description": "If imported, this field contains a cryptic string that says from which absolute base path the original import was started. It's cryptic for a reason: In collaborative spaces, this string will be visible to all space members. To protect the original importer's privacy, we don't save the base folder in plain text (it could contain an OS username)."
        },
        "importBaseFolderName": {
          "type": "string",
          "description": "If imported, this field contains the name of the folder from which the original import was started."
        },
        "importPath": {
          "type": "string",
          "description": "If imported, this field contains the relative path from which this media was originally imported.",
          "default": "Same as 'path'"
        },
        "importContentHash": {
          "type": "string",
          "description": "If imported, this field contains the unique fingerprint of the originally imported file.",
          "default": "Hash of the actual file that is being imported"
        },
        "importFormat": {
          "enum": ["wav", "mp3", "fac", "m4a"],
          "description": "If imported, this field contains the format of the originally imported file.",
          "default": "Format of the actual file that is being imported"
        },
        "customData": {
          "$ref": "#/definitions/CustomData",
          "description": "Custom data associated with this recording"
        }
      }
    },
    "Timestamp": {
      "type": "integer",
      "description": "Timezone-less timestamp, expressed in milliseconds since epoch UTC"
    },
    "CustomData": {
      "type": "object",
      "title": "Custom data",
      "description": "Arbitrary data. Each key of this object corresponds to the ID of a custom field. If the custom field doesn't exist, the data will be kept but not shown in the user interface. The structure of the value must correspond to the type of the custom field. It can be anything from a simple number to a complex nested object.",
      "additionalProperties": true
    },
    "Marker": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "authorId": {
          "type": "integer"
        },
        "hidden": {
          "type": "boolean"
        },
        "fileId": {
          "type": "string"
        },
        "filePath": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "start": {
          "type": "integer"
        },
        "length": {
          "type": "integer"
        },
        "rating": {
          "type": "integer"
        },
        "createdAt": {
          "type": "integer"
        },
        "comments": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Comment"
          }
        },
        "customData": {
          "$ref": "#/definitions/MarkerCustomData"
        }
      },
      "required": [],
      "title": "Marker"
    },
    "Comment": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "hidden": {
          "type": "boolean"
        },
        "authorId": {
          "type": "integer"
        },
        "createdAt": {
          "type": "integer"
        },
        "content": {
          "type": "string"
        }
      },
      "required": [],
      "title": "Comment"
    },
    "MarkerCustomData": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "019951f6-fa46-7b80-b4c8-54801c12a8b0": {
          "type": "string",
          "format": "uuid"
        }
      },
      "required": [],
      "title": "MarkerCustomData"
    },
    "Playlist": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "hidden": {
          "type": "boolean"
        },
        "authorId": {
          "type": "integer"
        },
        "createdAt": {
          "type": "integer"
        },
        "name": {
          "type": "string"
        },
        "items": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [],
      "title": "Playlist"
    },
    "Sheet": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string"
        },
        "hidden": {
          "type": "boolean"
        },
        "title": {
          "type": "string"
        },
        "content": {
          "$ref": "#/definitions/SheetContent"
        }
      },
      "required": [],
      "title": "Sheet"
    },
    "SheetContent": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "type": {
          "type": "string"
        },
        "content": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/PurpleContent"
          }
        }
      },
      "required": [],
      "title": "SheetContent"
    },
    "PurpleContent": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "type": {
          "type": "string"
        },
        "content": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/FluffyContent"
          }
        },
        "attrs": {
          "$ref": "#/definitions/PurpleAttrs"
        }
      },
      "required": [],
      "title": "PurpleContent"
    },
    "PurpleAttrs": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string"
        },
        "level": {
          "type": "integer"
        }
      },
      "required": [],
      "title": "PurpleAttrs"
    },
    "FluffyContent": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "type": {
          "type": "string"
        },
        "text": {
          "type": "string"
        },
        "content": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/TentacledContent"
          }
        }
      },
      "required": [],
      "title": "FluffyContent"
    },
    "TentacledContent": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "type": {
          "type": "string"
        },
        "content": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/StickyContent"
          }
        }
      },
      "required": [],
      "title": "TentacledContent"
    },
    "StickyContent": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "type": {
          "type": "string"
        },
        "attrs": {
          "$ref": "#/definitions/FluffyAttrs"
        }
      },
      "required": [],
      "title": "StickyContent"
    },
    "FluffyAttrs": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string"
        },
        "href": {
          "type": "string"
        }
      },
      "required": [],
      "title": "FluffyAttrs"
    }
  }
}
